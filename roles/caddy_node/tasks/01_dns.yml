---
- name: Create Cloudflare DNS record for XHTTP subdomain
  community.general.cloudflare_dns:
    zone: "{{ cloudflare_zone }}"
    record: "{{ xhttp_subdomain }}"
    type: A
    value: "{{ ansible_host | default(inventory_hostname) }}"
    proxied: false
    api_token: "{{ cloudflare_api_token }}"
    state: present
  become: false

- name: Display XHTTP DNS configuration
  ansible.builtin.debug:
    msg: "XHTTP DNS record configured: {{ xhttp_subdomain }}.{{ cloudflare_zone }} -> {{ ansible_host | default(inventory_hostname) }}"
