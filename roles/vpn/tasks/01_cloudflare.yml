---
- name: Create or update Cloudflare DNS record
  community.general.cloudflare_dns:
    zone: "{{ zone }}"
    record: "{{ domain }}"
    type: A
    value: "{{ ansible_default_ipv4.address }}"
    proxied: false
    api_token: "{{ cloudflare_api_token }}"
    state: present

- name: Display DNS configuration
  ansible.builtin.debug:
    msg: "DNS record configured: {{ domain }} -> {{ ansible_default_ipv4.address }}"
